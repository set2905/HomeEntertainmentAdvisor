@page "/UserReviews"
@using HomeEntertainmentAdvisor.Models;
@using HomeEntertainmentAdvisor.Services.Interfaces;
@inject IReviewService reviewService

<PageTitle>Review</PageTitle>
<MudGrid Justify="Justify.Center">
    <MudItem xs="12" md="10">
        <MudTable Items="@reviews">
            <ToolBarContent>
                <MudText Typo="Typo.h6">Reviews</MudText>
            </ToolBarContent>
            <HeaderContent>
                <MudTh>№</MudTh>
                <MudTh>Name</MudTh>
                <MudTh>Likes</MudTh>
            </HeaderContent>
            <RowTemplate>
                <MudTd DataLabel="№">@reviews.IndexOf(context)</MudTd>
                <MudTd DataLabel="Name">
                    <MudLink Href="@GetHref(context)">
                        @context.Name
                    </MudLink>
                </MudTd>
                <MudTd DataLabel="Likes">@context.CachedLikes</MudTd>
            </RowTemplate>
        </MudTable>
    </MudItem>
</MudGrid>

@code
{
    [Parameter]
    public string? Search { get; set; }

    private List<Review> reviews = new();

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        reviews = await reviewService.GetMyReviews();
    }
    private string GetHref(Review context)
    {
        return $"Review/{context.Id}";
    }

}